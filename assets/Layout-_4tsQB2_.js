import{j as se,m as re,af as ce,_ as Z,V as ie,d as oe,u as le,l as U,e as ae,g as m,i as A,s as ue,a4 as de,J as te,P as ee,ag as ge,C as pe,z as ve,A as he,r as B,b as me,D as y,E as T,F as o,Q as u,H as c,G as p,S as _e,O as R,L as O,I as N,K as fe,R as V}from"./index-trPnz5BS.js";import{u as Ce,d as be,e as ye,c as Se,f as $e}from"./User-CHhtlxsL.js";import{h as xe}from"./moment-BjLXg0w5.js";import{P as Y}from"./Plan-BJnWljSG.js";import{W as ke,B as Pe}from"./index-Dj6s8LTA.js";import{g as Be,i as Te,a as we}from"./colors-vDoEnMgw.js";import"./User-U_Q68dKX.js";import"./parse-j8CtVGGo.js";const W=(e,r,n)=>{const l=ce(n);return{[`${e.componentCls}-${r}`]:{color:e[`color${n}`],background:e[`color${l}Bg`],borderColor:e[`color${l}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}},ze=e=>Be(e,(r,n)=>{let{textColor:l,lightBorderColor:s,lightColor:t,darkColor:i}=n;return{[`${e.componentCls}-${r}`]:{color:l,background:t,borderColor:s,"&-inverse":{color:e.colorTextLightSolid,background:i,borderColor:i},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}}),Ie=e=>{const{paddingXXS:r,lineWidth:n,tagPaddingHorizontal:l,componentCls:s}=e,t=l-n,i=r-n;return{[s]:Z(Z({},ie(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:t,fontSize:e.tagFontSize,lineHeight:`${e.tagLineHeight}px`,whiteSpace:"nowrap",background:e.tagDefaultBg,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",[`&${s}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.tagDefaultColor},[`${s}-close-icon`]:{marginInlineStart:i,color:e.colorTextDescription,fontSize:e.tagIconSize,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${s}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${s}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:t}}),[`${s}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},ne=se("Tag",e=>{const{fontSize:r,lineHeight:n,lineWidth:l,fontSizeIcon:s}=e,t=Math.round(r*n),i=e.fontSizeSM,_=t-l*2,v=e.colorFillAlter,h=e.colorText,a=re(e,{tagFontSize:i,tagLineHeight:_,tagDefaultBg:v,tagDefaultColor:h,tagIconSize:s-2*l,tagPaddingHorizontal:8,tagBorderlessBg:e.colorFillTertiary});return[Ie(a),ze(a),W(a,"success","Success"),W(a,"processing","Info"),W(a,"error","Error"),W(a,"warning","Warning")]}),Fe=()=>({prefixCls:String,checked:{type:Boolean,default:void 0},onChange:{type:Function},onClick:{type:Function},"onUpdate:checked":Function}),X=oe({compatConfig:{MODE:3},name:"ACheckableTag",inheritAttrs:!1,props:Fe(),setup(e,r){let{slots:n,emit:l,attrs:s}=r;const{prefixCls:t}=le("tag",e),[i,_]=ne(t),v=a=>{const{checked:g}=e;l("update:checked",!g),l("change",!g),l("click",a)},h=U(()=>ae(t.value,_.value,{[`${t.value}-checkable`]:!0,[`${t.value}-checkable-checked`]:e.checked}));return()=>{var a;return i(m("span",A(A({},s),{},{class:[h.value,s.class],onClick:v}),[(a=n.default)===null||a===void 0?void 0:a.call(n)]))}}}),He=()=>({prefixCls:String,color:{type:String},closable:{type:Boolean,default:!1},closeIcon:ee.any,visible:{type:Boolean,default:void 0},onClose:{type:Function},onClick:ge(),"onUpdate:visible":Function,icon:ee.any,bordered:{type:Boolean,default:!0}}),w=oe({compatConfig:{MODE:3},name:"ATag",inheritAttrs:!1,props:He(),slots:Object,setup(e,r){let{slots:n,emit:l,attrs:s}=r;const{prefixCls:t,direction:i}=le("tag",e),[_,v]=ne(t),h=ue(!0);de(()=>{e.visible!==void 0&&(h.value=e.visible)});const a=d=>{d.stopPropagation(),l("update:visible",!1),l("close",d),!d.defaultPrevented&&e.visible===void 0&&(h.value=!1)},g=U(()=>Te(e.color)||we(e.color)),j=U(()=>ae(t.value,v.value,{[`${t.value}-${e.color}`]:g.value,[`${t.value}-has-color`]:e.color&&!g.value,[`${t.value}-hidden`]:!h.value,[`${t.value}-rtl`]:i.value==="rtl",[`${t.value}-borderless`]:!e.bordered})),z=d=>{l("click",d)};return()=>{var d,C,b;const{icon:I=(d=n.icon)===null||d===void 0?void 0:d.call(n),color:S,closeIcon:$=(C=n.closeIcon)===null||C===void 0?void 0:C.call(n),closable:F=!1}=e,H=()=>F?$?m("span",{class:`${t.value}-close-icon`,onClick:a},[$]):m(pe,{class:`${t.value}-close-icon`,onClick:a},null):null,D={backgroundColor:S&&!g.value?S:void 0},x=I||null,k=(b=n.default)===null||b===void 0?void 0:b.call(n),M=x?m(te,null,[x,m("span",null,[k])]):k,L=e.onClick!==void 0,P=m("span",A(A({},s),{},{onClick:z,class:[j.value,s.class],style:[D,s.style]}),[M,H()]);return _(L?m(ke,null,{default:()=>[P]}):P)}}});w.CheckableTag=X;w.install=function(e){return e.component(w.name,w),e.component(X.name,X),e};const De="_container_1tkwt_1",Me="_fs_1tkwt_23",Le={container:De,fs:Me},Ne={class:"ViewWrapper"},We=o("h4",{class:""},"订单详情",-1),Ae={class:"text-sm mt-2"},je=o("span",null,null,-1),Ee=o("hr",{class:"mt-3"},null,-1),Re=o("h4",null,"商品详情",-1),Oe={class:"flex mt-2 justify-between items-center"},Ve=o("hr",{class:"mt-5"},null,-1),Ye={class:"lg:flex justify-between mt-5"},Ue={key:0,class:"lg:w-[60%]"},Xe=o("h4",null,"支付方式",-1),Ge={class:"flex"},Je=["onClick"],Ke=["src"],Qe={class:"lg:w-[40%] flex flex-col"},qe=o("h4",null,"订单摘要",-1),Ze=o("p",{style:{"font-size":"20px","margin-top":"20px"}},"总计:",-1),eo={class:"mt-2 font-black"},oo={key:0,class:"flex flex-col mt-5"},lo=o("hr",null,null,-1),ao={class:"flex justify-end pt-5 lg:pl-[72%] gap-2"},to={__name:"Layout",setup(e){const r=Ce(),n=he(),l=B(),s=B(),t=B(0);me(()=>{be(n.params.id).then(a=>{l.value=a.data}),ye().then(a=>{s.value=a.data})});const i=B(!1),_=()=>{i.value=!0,Se({trade_no:n.params.id}).then(a=>{V.success("取消订单成功"),location.reload()}).catch(a=>{V.error(a),i.value=!1})},v=B(!1),h=()=>{v.value=!0,$e({trade_no:n.params.id,method:s.value[t.value].id}).then(a=>{window.location.href=a.data}).catch(a=>{V.error(a),v.value=!1})};return(a,g)=>{var d,C,b,I,S,$,F,H,D,x,k,M,L,P,G,J,K,Q,q;const j=w,z=Pe;return y(),T("div",Ne,[o("div",{class:N(a.$style.container)},[We,o("div",Ae,[o("p",null,[u("订单号："),o("span",null,c(p(n).params.id),1)]),o("p",null,[u("创建时间："+c(p(xe)(((d=l.value)==null?void 0:d.created_at)*1e3).format("YYYY-MM-DD HH:ss:mm")),1),je])]),Ee,Re,o("div",Oe,[o("div",null,[o("p",null,[u("产品名称："),o("span",null,c((C=l.value)==null?void 0:C.plan.name),1)]),o("p",null,[u("类型/周期："),o("span",null,c(p(Y).prototype.Handel_name((b=l.value)==null?void 0:b.period)),1)]),o("p",null,[u("产品流量："),o("span",null,c((I=l.value)==null?void 0:I.plan.transfer_enable)+" GB",1)])]),l.value?(y(),_e(j,{key:0,color:p(Y).prototype.Handel_status((S=l.value)==null?void 0:S.status)[2]},{default:R(()=>{var f;return[u(c(p(Y).prototype.Handel_status((f=l.value)==null?void 0:f.status)[1]),1)]}),_:1},8,["color"])):O("",!0)]),Ve,o("div",Ye,[(($=l.value)==null?void 0:$.status)===0?(y(),T("div",Ue,[Xe,o("div",Ge,[o("div",{class:N([a.$style.fs,"flex flex-col mt-5 gap-5"])},[(y(!0),T(te,null,fe(s.value,(f,E)=>(y(),T("div",{class:N([E===t.value?"border-[var(--bg)]":"","cursor-pointer flex border rounded-xl py-2 px-5 gap-2 items-center"]),onClick:so=>t.value=E},[o("img",{src:f.icon,alt:"",class:"w-12"},null,8,Ke),o("p",{class:N(E===t.value?"!text-[var(--bg)]":"")},c(f.name),3)],10,Je))),256))],2)])])):O("",!0),o("div",Qe,[qe,o("p",null,[u("商品价格: "),o("span",null,c((F=p(r).Config)==null?void 0:F.currency_symbol)+c((((H=l.value)==null?void 0:H.plan[l.value.period])/100).toFixed(2)),1)]),o("p",null,[u("余额支付: "),o("span",null,c((D=p(r).Config)==null?void 0:D.currency_symbol)+c((((x=l.value)==null?void 0:x.balance_amount)/100).toFixed(2)||0),1)]),o("p",null,[u("抵扣金额: "),o("span",null,c((k=p(r).Config)==null?void 0:k.currency_symbol)+c((((M=l.value)==null?void 0:M.discount_amount)/100).toFixed(2)||0),1)]),o("p",null,[u("旧订阅折抵金额: "),o("span",null,c((L=p(r).Config)==null?void 0:L.currency_symbol)+" 0",1)]),o("p",null,[u("支付手续费: "),o("span",null,c((P=p(r).Config)==null?void 0:P.currency_symbol)+c((((G=l.value)==null?void 0:G.handling_amount)/100).toFixed(2)||0),1)]),Ze,o("div",eo,[o("h2",null,c((J=p(r).Config)==null?void 0:J.currency_symbol)+c((((K=l.value)==null?void 0:K.total_amount)/100+((Q=l.value)==null?void 0:Q.handling_amount)/100).toFixed(2)),1)])])]),((q=l.value)==null?void 0:q.status)===0?(y(),T("div",oo,[lo,o("div",ao,[m(z,{loading:i.value,block:"",danger:"",ghost:"",size:"large",type:"primary",onClick:g[0]||(g[0]=f=>_())},{default:R(()=>[u("取消订单")]),_:1},8,["loading"]),m(z,{loading:v.value,block:"",size:"large",type:"primary",onClick:g[1]||(g[1]=f=>h())},{default:R(()=>[u("立即支付")]),_:1},8,["loading"])])])):O("",!0)],2)])}}},no={$style:Le},mo=ve(to,[["__cssModules",no]]);export{mo as default};
